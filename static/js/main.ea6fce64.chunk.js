(this["webpackJsonparcade-image-tools"]=this["webpackJsonparcade-image-tools"]||[]).push([[0],{14:function(e,t,a){e.exports=a(23)},19:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),r=a(12),o=a.n(r),s=(a(19),a(3)),c=a(4),A=a(8),l=a(7),h=(a(20),a(1)),u=a.n(h),f=a(2),d=a(10);function m(e){for(var t=e.length,a="",i=0;i<t;++i)a+=String.fromCharCode(e[i]);return a}function v(e,t,a,i,n){return g(E(e),t,e,a,i,n)}function p(e,t,a){return g(function(e,t){!(e=(e=(e=e.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:img)/g,"").trim()).replace(/^["`\(\)]*/,"").replace(/["`\(\)]*$/,"")).replace(/&#10;/g,"\n"))&&t&&(e=t);for(var a=e.split("\n"),i=[],n=0,r=0;r<a.length;r++){for(var o=a[r],s=[],c=0;c<o.length;c++)switch(o[c]){case"0":case".":s.push(0);break;case"1":case"#":s.push(1);break;case"2":case"T":s.push(2);break;case"3":case"t":s.push(3);break;case"4":case"N":s.push(4);break;case"5":case"n":s.push(5);break;case"6":case"G":s.push(6);break;case"7":case"g":s.push(7);break;case"8":s.push(8);break;case"9":s.push(9);break;case"a":case"A":case"R":s.push(10);break;case"b":case"B":case"P":s.push(11);break;case"c":case"C":case"p":s.push(12);break;case"d":case"D":case"O":s.push(13);break;case"e":case"E":case"Y":s.push(14);break;case"f":case"F":case"W":s.push(15)}s.length&&(i.push(s),n=Math.max(n,s.length))}for(var A=i.length,l=new y(n,A),h=0;h<A;h++)for(var u=i[h],f=0;f<n;f++)f<u.length?l.set(f,h,u[f]):l.set(f,h,0);return l}(e),t,void 0,void 0,void 0,a)}function g(e,t,a,i,n,r){return{width:e.width,height:e.height,data:a||C(e),previewURI:M(e,t),qualifiedName:i,tilemapTile:n,sourceFile:r}}var w=[".","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function k(e,t){var a="";switch(t){case"python":a='img("""';break;default:a="img`"}if(e)for(var i=0;i<e.height;i++){a+="\n";for(var n=0;n<e.width;n++)a+=w[e.get(n,i)]+" "}switch(a+="\n",t){case"python":a+='""")';break;default:a+="`"}return a}function b(e,t,a,i){for(var n=h(224|a)+h(e)+h(t)+"00",r=4,o=0,s=0,c=function(e){o|=e<<s,s==8-a?(n+=h(o),r++,o=0,s=0):s+=a},A=0;A<e;++A){for(var l=0;l<t;++l)c(i(A,l));for(;0!=s;)c(0);if(a>1)for(;3&r;)c(0)}return n;function h(e){return("0"+e.toString(16)).slice(-2)}}function C(e){var t=b(e.width,e.height,4,(function(t,a){return e.get(t,a)}));return btoa(m(function(e){for(var t=new Uint8ClampedArray(e.length>>1),a=0;a<e.length;a+=2)t[a>>1]=parseInt(e.slice(a,a+2),16);return t}(t)))}var y=function(){function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;Object(s.a)(this,e),this.width=t,this.height=a,this.x0=i,this.y0=n,this.buf=void 0,this.buf=r||new Uint8ClampedArray(this.dataLength())}return Object(c.a)(e,[{key:"set",value:function(e,t,a){if(e<this.width&&t<this.height&&e>=0&&t>=0){var i=this.coordToIndex(e,t);this.setCore(i,a)}}},{key:"get",value:function(e,t){if(e<this.width&&t<this.height&&e>=0&&t>=0){var a=this.coordToIndex(e,t);return this.getCore(a)}return 0}},{key:"coordToIndex",value:function(e,t){return e+t*this.width}},{key:"getCore",value:function(e){var t=Math.floor(e/2);return e%2===0?15&this.buf[t]:(240&this.buf[t])>>4}},{key:"setCore",value:function(e,t){var a=Math.floor(e/2);this.buf[a]=e%2===0?240&this.buf[a]|15&t:15&this.buf[a]|(15&t)<<4}},{key:"dataLength",value:function(){return Math.ceil(this.width*this.height/2)}}]),e}();function E(e){var t=atob(e.slice(e.indexOf(",")+1)),a=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2);135===a&&(a=224|t.charCodeAt(1),i=t.charCodeAt(2)|t.charCodeAt(3)<<8,n=t.charCodeAt(4)|t.charCodeAt(5)<<8,t=t.slice(4));var r=new y(i,n),o=4;if(225===a)for(var s=1,c=t.charCodeAt(o++),A=0;A<i;++A)for(var l=0;l<n;++l)r.set(A,l,c&s?1:0),256==(s<<=1)&&(s=1,c=t.charCodeAt(o++));else for(var h=0;h<i;h++){for(var u=0;u<n;u+=2){var f=t.charCodeAt(o++);r.set(h,u,15&f),u!=n-1&&r.set(h,u+1,f>>4&15)}for(;3&o;)o++}return r}function M(e,t){var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var i=a.getContext("2d");if(i)for(var n=0;n<e.width;n++)for(var r=0;r<e.height;r++){var o=e.get(n,r);o&&(i.fillStyle=t[o],i.fillRect(n,r,1,1))}return a.toDataURL()}a(9),a(13);var _=["#000000","#ffffff","#ff2121","#ff93c4","#ff8135","#fff609","#249ca3","#78dc52","#003fad","#87f2ff","#8e2ec4","#a4839f","#5c406c","#e5cdc4","#91463d","#000000"];a(22);var N={data:"hwQQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",previewURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAH0lEQVQ4T2NkoBAwUqifYdQAhtEwYBgNA1A+Gvi8AAAmmAARf9qcXAAAAABJRU5ErkJggg==",width:16,height:16},I=function(e){Object(A.a)(a,e);var t=Object(l.a)(a);function a(e){var i;Object(s.a)(this,a),(i=t.call(this,e))._item=void 0,i.handleMessage=function(e){var t=e.data;switch(t.type){case"ready":i.loadJres(i._item);break;case"update":var a=v(t.message,_);i._item=a}},i.autosaveJres=function(){i.state.saving||i.getJres(),setTimeout(i.autosaveJres,2e3)},i.loadJres=function(e){i.props.postMessage({type:"initialize",message:e.data})},i.getJres=function(){i.props.postMessage({type:"update"})},i.copyToClipboard=function(){var e=k(E(i._item.data),"typescript"),t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},i.onClockwiseRotateButtonClick=function(){i._transformImpl(i.rotateClockwise)},i.onCounterClockwiseRotateButtonClick=function(){i._transformImpl(i.rotateCounterClockwise)},i.onHorizontalFlipButtonClick=function(){i._transformImpl(i.horizontalFlip)},i.onVerticalFlipButtonClick=function(){i._transformImpl(i.verticalFlip)};var n=window.localStorage.getItem("SPRITE_DATA");try{var r=n&&JSON.parse(n);i._item=r||Object(d.a)({},N)}catch(o){i._item=Object(d.a)({},N)}return i.state={item:i._item,saving:void 0},i}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.handleMessage),this.loadJres(this._item),setTimeout(this.autosaveJres,2e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage),window.localStorage.setItem("SPRITE_DATA",JSON.stringify(this._item))}},{key:"componentDidUpdate",value:function(e,t){window.localStorage.setItem("SPRITE_DATA",JSON.stringify(this._item))}},{key:"_transformImpl",value:function(e){var t=this;Object(f.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getJres();case 2:case"end":return e.stop()}}),e)})))();var a=p(k(e(E(this._item.data)),"typescript"),_);this._item=a,this.props.postMessage({type:"initialize",message:a.data})}},{key:"render",value:function(){this.state.item;return n.a.createElement("div",{id:"image-toolbar"},n.a.createElement("div",{className:"image-toolbar-buttons"},n.a.createElement("div",{className:"image-button",title:"Rotate 90",onClick:this.onClockwiseRotateButtonClick},n.a.createElement("i",{className:"icon redo"})),n.a.createElement("div",{className:"image-button",title:"Rotate 270",onClick:this.onCounterClockwiseRotateButtonClick},n.a.createElement("i",{className:"icon undo"})),n.a.createElement("div",{className:"image-button",title:"Horizontal flip",onClick:this.onHorizontalFlipButtonClick},n.a.createElement("i",{className:"icon arrows alternate horizontal icon"})),n.a.createElement("div",{className:"image-button",title:"Vertical flip",onClick:this.onVerticalFlipButtonClick},n.a.createElement("i",{className:"icon arrows alternate vertical icon"})),n.a.createElement("div",{className:"image-button",title:"Copy to clipboard",onClick:this.copyToClipboard},n.a.createElement("i",{className:"icon copy outline"}))))}},{key:"rotateClockwise",value:function(e){for(var t=new y(e.height,e.width),a=0;a<e.width;a++)for(var i=0;i<e.height;i++)t.set(e.height-1-i,a,e.get(a,i));return t}},{key:"rotateCounterClockwise",value:function(e){for(var t=new y(e.height,e.width),a=0;a<e.width;a++)for(var i=0;i<e.height;i++)t.set(i,e.width-1-a,e.get(a,i));return t}},{key:"verticalFlip",value:function(e){for(var t=new y(e.height,e.width),a=0;a<e.height;a++)for(var i=0;i<e.width;i++)t.set(i,e.height-1-a,e.get(i,a));return t}},{key:"horizontalFlip",value:function(e){for(var t=new y(e.height,e.width),a=0;a<e.width;a++)for(var i=0;i<e.height;i++)t.set(e.height-1-i,a,e.get(i,a));return t}}]),a}(n.a.Component),O=function(e){Object(A.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).iframe=void 0,e.postMessage=function(t){e.iframe&&e.iframe.contentWindow&&(t._fromVscode=!0,e.iframe.contentWindow.postMessage(t,"*"))},e.onMouseEnter=function(){var t,a;null===(t=e.iframe)||void 0===t||null===(a=t.contentWindow)||void 0===a||a.focus()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.iframe=document.getElementById("editor")}},{key:"render",value:function(){return n.a.createElement("div",{className:"app"},n.a.createElement("iframe",{id:"editor",onMouseEnter:this.onMouseEnter,title:"MakeCode Arcade sprite editor",src:"https://arcade.makecode.com/beta--asseteditor"}),n.a.createElement(I,{postMessage:this.postMessage}))}}]),a}(n.a.Component);o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(O,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.ea6fce64.chunk.js.map